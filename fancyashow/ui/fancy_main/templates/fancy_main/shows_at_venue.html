{% extends "fancy_main/root.html" %}

{% load show_util %}

{% block title %}
 {% if day %}
	 {{ venue.name }} ({{ day|date }})
 {% else %}
	 Upcoming Shows at {{ venue.name }}
	{% endif %}
{% endblock %}

{% block head %}
  {{ block.super }}

	<meta name="description" content="{% attribute %}
	  Upcoming Shows at {{ venue.name }}:

  {% for show in shows %}
    {% if forloop.counter < 6 %}
      {% if show.title %}
        {{ show.title }}
      {% else %}
        {{ show.artists.0.name }}
      {% endif %}

      on {{ show.date|date:"D, M d" }}{% if forloop.counter != 5 %}, {% endif %}
    {% endif %}
  {% endfor %}
	{% endattribute %}" />
{% endblock %}

{% block nav %}
	{% venue_nav venues venue %}
{% endblock %}

{% block content %}

<section id="shows"{% if day %}class="for-date"{% endif %}>
  <div class="wrapper">
	  <h1>
		 {% if day %}
			 {{ venue.name }} ({{ day|date:"D, M d" }})
		 {% else %}
			 {{ venue.name }}
			{% endif %}
		</h1>
	
		{% show_list shows artist_map venue_map %}

		<nav id="display-controls">
			<a id="prev" href="#prev">&lt;</a>
			<a id="state" href="#state">Show All</a>
			<a id="next" href="#next">&gt;</a>
		</nav>
  </div>
 </section>

<section id="artists">
  <div class="wrapper">
	  <h1>
			Who's Playing
		</h1>
		<ul>
		{% for info in artists %}
			<li{% if info.artist.rank > hot_ranking %} class="hot"{% endif %} data-rank="{{ info.artist.rank }}" data-shows="{% for show in info.shows %}{{ show.id_str }}{% if not forloop.last %},{% endif %}{% endfor %}"><a href="#{{ info.artist.url_name }}">{{ info.artist.name }}</a></li>
		{% endfor %}
		</ul>
  </div>
</section>
{% endblock %}
